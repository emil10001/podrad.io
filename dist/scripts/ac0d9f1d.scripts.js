"use strict";angular.module("podRadio",["ngSanitize","ui.bootstrap"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/pods",{templateUrl:"views/pods.html",controller:"PodsCtrl"}).when("/pods/:podId",{templateUrl:"views/onepod.html",controller:"OnePodCtrl"}).otherwise({redirectTo:"/pods"})}]),angular.module("podRadio").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("podRadio").controller("PodsCtrl",["$scope",function(a){function b(){console.log("updatePods "+localStorage.podIds),localStorage.podIds||localStorage.setItem("podIds",JSON.stringify([])),a.podIds=JSON.parse(localStorage.podIds),a.myPods=[];for(var b=0;b<a.podIds.length;b++){var c=localStorage[a.podIds[b]];c&&a.myPods.push(JSON.parse(c))}}b(),a.deletePod=function(c){confirm("really delete "+c.name+"?")&&(localStorage.removeItem(c.id),a.podIds.splice(a.podIds.indexOf(c.id),1),localStorage.setItem("podIds",JSON.stringify(a.podIds)),b())},a.addPod=function(){var c=CryptoJS.MD5(a.url).toString(CryptoJS.enc.Hex);localStorage.setItem(c,JSON.stringify({id:c,name:a.name,url:a.url})),a.podIds.push(c);for(var d=0;d<a.podIds.length;d++)a.podIds[d]?""===a.podIds[d]&&a.podIds.splice(d,1):a.podIds.splice(d,1);localStorage.setItem("podIds",JSON.stringify(a.podIds)),a.name="",a.url="",b()}}]);var X2JS=new X2JS,myApp=angular.module("podRadio");myApp.config(["$httpProvider",function(a){a.defaults.useXDomain=!0,delete a.defaults.headers.common["X-Requested-With"]}]),myApp.controller("OnePodCtrl",["$scope","$routeParams","$http",function(a,b,c){a.podId=b.podId,a.oneAtATime=!0;var d=JSON.parse(localStorage[a.podId]);delete c.defaults.headers.common["X-Requested-With"],c.defaults.useXDomain=!0;var e="http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&output=xml&callback=JSON_CALLBACK&num=3&q="+encodeURIComponent(d.url);console.log(d),console.log("url "+d.url),console.log("request "+e),a.makeRequest=c.jsonp(e).success(function(b){console.log(b),a.podcontents=X2JS.xml_str2json(b.responseData.xmlString).rss.channel,console.log(a.podcontents)})}]);